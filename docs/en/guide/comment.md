# Comment System

::: tip
Unless otherwise specified, the following configurations are modified in the `/_config.shokax.yml` or `/_config.shokaX.yml` files.
:::

## Preface

If you are migrating from shoka, please note that shokaX has removed support for `minivaline` as the `minivaline` repository has been archived (ceased maintenance). It is recommended to use `waline` instead. ShokaX will not provide support for `valine` due to serious security issues with the `valine` comment system, and because `valine` is no longer open-source after version 1.4.0.

## Valine-liked Comment System

These are some systems that fixed some issues of valine, but some attack events are reported in those systems' community issue, so choose those systems carefully

::: details waline
[waline](https://waline.js.org/) is a simple and secure comment system. The configuration content is as follows:

```yaml
waline:
  enable: true # Whether to enable
  serverURL: "" # Waline server address
  lang: "zh-CN" # Comment interface language
  locale: {} # Localization replacement, see Waline documentation for details
  emoji: # Emoji package, default is Waline official configuration
    - https://unpkg.com/@waline/emojis@1.0.1/weibo
    - https://unpkg.com/@waline/emojis@1.0.1/alus
    - https://unpkg.com/@waline/emojis@1.0.1/bilibili
    - https://unpkg.com/@waline/emojis@1.0.1/qq
    - https://unpkg.com/@waline/emojis@1.0.1/tieba
    - https://unpkg.com/@waline/emojis@1.0.1/tw-emoji
  meta: # Items that can be filled in the comments
    - nick
    - mail
    - link
  requiredMeta: # Items that must be filled in the comments
    - nick
    - mail
  wordLimit: 0 # Comment word limit (not recommended to be 0)
  pageSize: 10 # Number of comments displayed per page
  pageview: true # Page view count display
```

:::

:::details twikoo
[twikoo](https://twikoo.js.org) is a simple, secure, and free static website comment system. The configuration content is as follows:

```yaml
twikoo:
  enable: true # Whether to enable
  link: "https://cdn.staticfile.org/twikoo/1.6.6/twikoo.nocss.min.js" # Twikoo front-end js address, replace CDN or upgrade if needed
  mode: vercel # Vercel (private deployment) or Tencent
  envId: "https://114514.foo.bar" # Twikoo environment ID, fill in the address for Vercel and private deployment
  region: # Do not fill in for Vercel and private deployment, see Twikoo documentation for Tencent Cloud
```

:::

## Git Series Comment System

This series all use git-related systems for data storage, hence they are classified as one category.
Due to oauth permission issues, some git series comment systems have serious privacy leakage problems. It is recommended to check the corresponding community issues before use.
:::details gitalk
[gitalk](https://github.com/gitalk/gitalk/blob/master/readme-cn.md) is a comment plugin developed based on GitHub Issue and Preact. The configuration content is as follows:

```yaml
gitalk:
  # Please refer to the official Gitalk tutorial for filling in. The following keys correspond to the Gitalk configuration keys.
  clientID:
  clientSecret:
  repo:
  owner:
  admin:
  proxy: # CORS Proxy, optional
```

:::

## Detailed Tutorial on Adding a Comment System

### Waline

:::tip
Use the Waline comment system and Zeabur server side for deployment. The Domains generated by Zeabur’s console are much faster than those of Vercel.
:::

![Cloud Server Comparison](https://github.com/foryouos/shokaX-docs/assets/58133210/882899f3-5050-4b61-ace9-5ea6933a9217 "来源Twikoo文档对各服务器的对比")

- For Zeabur server deployment, follow the [Official Introduction](https://waline.js.org/guide/deploy/zeabur.html) step by step. In the end, you can open comments through Domains.

  :::tip
  The deployment process might take a bit longer, about 5 minutes. Please be patient. After the deployment is running, it will generate Domains. You need to open Domains for testing. If it opens successfully, then it’s done.
  :::

```yaml
waline:
  enable: true # Whether to enable
  serverURL: "https://domains.zeabur.app" # Replace this link with your own Domains. Do not add a / at the end of the homepage link, as it will cause an error.
```

- Run `hexo cl` to clear the cache.
- Run `hexo g` to rebuild.
- Run `hexo s` to start the local server, and the comments can be used.

![image](https://github.com/foryouos/shokaX-docs/assets/58133210/7c2ab393-96f1-4cce-95cc-0017e9981026)
